\documentclass[11pt,twoside]{article}
\usepackage[cp1251]{inputenc}
\usepackage{amssymb,amsmath,amscd}
\usepackage{fancyheadings}
\usepackage[russian]{babel}
\usepackage{bm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{esint}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage{doublespace}
\headrulewidth=0pt
\textwidth=165mm % ширина текста
\pagestyle{fancyplain}
\oddsidemargin=-4.4mm % левое поле для нечетной страницы (+1 дюйм)
\evensidemargin=-4.4mm % левое поле для четной страницы (+1 дюйм)
\textheight=234mm % высота текста на странице
\topmargin=-16.6mm % верхнее поле (+1 дюйм)
\headheight=5.0mm % место для колонтитула
\headsep=6.6mm % отступ после колонтитула 6.6 5.6
\footskip=8.1mm % расстояние до колонтитула 8.1 7.1
%\renewcommand{\baselinestretch}{0.9} % интерлиньяж 0.9 0.87
% РИСУНКИ. Вставить в преамбулу
\usepackage{graphicx}
\usepackage{caption2}
%
\setcaptionwidth{\linewidth}
%
\renewcommand{\captionlabeldelim}{.~}
\renewcommand{\captionlabelfont}{\bfseries}
\renewcommand{\captionfont}{\footnotesize}
%
\makeatletter
\renewcommand \thefigure{\@arabic\c@figure}
\renewcommand \thetable{\@arabic\c@table}
%
\renewcommand*\caption@@@normal{%
\parfillskip0pt plus 2fil%
 \caption@label\captiontext\par}
%
\newcaptionstyle{nonumber}{%
 \usecaptionmargin%
 \captionfont%
 \onelinecaption%
 {{\parbox[t]{\realcaptionwidth}{\captiontext}}}%
 {\captiontext}
}%
%
\makeatother
\usepackage{wrapfig}
% РИСУНКИ
\newcommand{\Nazva}[1]{\begin{center}\baselineskip=6.0mm{\Large\textbf{#1}}\end{center}\vspace*{0.5mm}}
\newcommand{\Avtor}[1]{\centerline{\large\textbf{ \ #1}}\vspace*{6.0mm}}
\newcommand{\NS}{ }
\newcommand{\lit}[3]{\vspace*{0.7mm}\par\noindent\makebox[5.2mm][r]{#1.~}\parbox[t]{159.8mm}{{\textit{#2}}~{#3}}\hspace*{-1.6mm}}
\newcommand{\litt}[2]{\vspace*{0.7mm}\par\noindent\makebox[5.2mm][r]{#1.~}\parbox[t]{159.8mm}{#2}\hspace*{-1.6mm}}
\mathsurround=2pt % дополнительный пробел слева и справа от формулы в тексте
\newcommand{\tr}{\mathop{\mathrm{tr}}\nolimits}
\newcommand{\const}{\mathop{\mathrm{const}}\nolimits}
\newcommand{\col}{\mathop{\mathrm{col}}\nolimits}
\newcommand{\diag}{\mathop{\mathrm{diag}}\nolimits}
\newcommand{\diam}{\mathop{\mathrm{diam}}\nolimits}
\newcommand{\dist}{\mathop{\mathrm{dist}}\nolimits}
\newcommand{\grad}{\mathop{\mathrm{grad}}\nolimits}
\newcommand{\Ker}{\mathop{\mathrm{Ker}}\nolimits}
\newcommand{\rank}{\mathop{\mathrm{rank}}\nolimits}
\newcommand{\rang}{\mathop{\mathrm{rang}}\nolimits}
\newcommand{\rot}{\mathop{\mathrm{rot}}\nolimits}
\newcommand{\sign}{\mathop{\mathrm{sign}}\nolimits}
\newcommand{\sgn}{\mathop{\mathrm{sgn}}\nolimits}
\newcommand{\supp}{\mathop{\mathrm{supp}}\nolimits}
\newcommand{\DIV}{\mathop{\mathrm{div}}\nolimits}
\newcommand{\RE}{\mathop{\mathrm{Re}}\nolimits}
\newcommand{\IM}{\mathop{\mathrm{Im}}\nolimits}
\renewcommand{\thefootnote}{\fnsymbol{footnote}} % сноски метить *)
%\setcounter{page}{1} % номер первой страницы журнала N 1
%\setcounter{page}{145} % номер первой страницы журнала N 2

\begin{document}

\hyphenation{бу-дем вы-пук-лос-ти вы-пук-лой ес-ли каж-дая каж-дый каж-до-го каж-дой ког-да ко-рас-пре-де-ле-ние
мат-ри-ца мат-риц мат-рич-ных мат-ри-цы мат-ри-цу мат-рич-но-го об-ласть об-лас-ти
под-став-ляя пред-став-ле-но по-мощью рас-смот-рим
сис-те-ма сис-те-мах сис-те-му сис-те-мой сис-тем сис-те-мы сис-те-ма-ми сис-те-ме сис-те-мам ско-ростью сов-па-да-ют сос-тоит
тог-да тож-дест-вен-но тож-дест-ва управ-ле-ние управ-ля-е-мых управ-ля-е-мые управ-ля-е-ма час-ти час-тям чис-ло чис-ла}
\renewcommand{\abstractname}{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{center}\textit{Национальная академия наук Беларуси \\
Труды Института математики. 0000. Том 00. \No~0. С.~\pageref{00b}--\pageref{00b}}{\rule[-1,5mm]{0pt}{1mm}}\\{\hrule\hrule}\end{center}\bigskip\bigskip
{\footnotesize\sl УДК 517.5}
\Nazva{Обобщение неравенства Джона-Ниренберга}
\Avtor{ А.~И.~Порабкович, Р.~В.~Шанин} \vspace{-5mm}
\begin{center}\textit{Белорусский государственный университет \\ e-mail: porabkovich@bsu.by, ????? \\ Поступила 00.00.2014}\end{center}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\lhead[~]{~}
\chead[~]{~}
\rhead[~]{~}
\lfoot[\thepage]{~}
\cfoot[~]{~}
\rfoot[~]{\thepage}
\label{00b}
\vspace{-5mm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{abstract}\noindent
Доказано обобщение неравенства Джона--Ниренберга, дающей описание классов $BMO$. Это обобщение справедливо на любом метрическом пространстве с мерой, удовлетворяющей условию удвоения.
\end{abstract}

\bigskip

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\textbf{1. Обозначения.} Пусть $(X,d,\mu)$ --- хаусдорфово пространство с регулярной
борелевской мерой $\mu$ и квазиметрикой $d$. Последнее означает, что
функция $d:X \times X \to [0,\infty )$ удовлетворяет условиям
\begin{equation*}
d(x,y)=0\Longleftrightarrow x=y,\quad d(x,y)=d(y,x),
\end{equation*}

и существует такая постоянная $a_d\ge 1$, что
\begin{equation}\label{eqQuasiTtiangleInequality}
d(x,y)\le a_d[d(x,z)+d(z,y)]
\end{equation}
для любых $x,y,z\in X$. При этом мы предполагаем, что семейство открытых шаров
\begin{equation*}
B=B(x,r)=\{y\in X:d(x,y)<r\}
\end{equation*}
образует базу окрестностей топологии $X$ и мера любого шара положительна и конечна. Также для произвольной положительной постоянной $c$ будем обозначать  $cB=c B(x,r) = B(x,c r).$

Говорят, что мера $\mu$ удовлетворяет условию удвоения, если
существует такая постоянная $a_{\mu}>0$, что
\begin{equation}\label{eqDoublingCondition}
\mu B(x,2t)\le a_{\mu}\mu B(x,t),\quad x\in X,\quad t>0.
\end{equation}

Если выполнено условие \eqref{eqDoublingCondition}, то тройка $(X,d,\mu)$ называется пространством однородного типа. Именно такие пространства мы будем рассматривать в этой работе. Основные сведения о них можно найти в [1].

Из неравенства \eqref{eqDoublingCondition} следует, что
\begin{equation}\label{eqDegreeDoublingCondition}
\mu (B(x,s))\leq a_{\mu}(\frac{s}{t})^{\gamma}\mu (B(x,t)),\quad x\in X,\;0<t\leq s,
\end{equation}
где $\gamma=\log_2a_{\mu}$. Это неравенство получается простой итерацией условия (\ref{eqDoublingCondition}).


Среднее значение функции $f\in L^1_{\mathrm{loc}}(X)$ на измеримом множестве $E\subset X$ положительной конечной меры будем обозначать

\begin{equation*}%\label{eq}
f_E=\fint \limits_Ef\,d\mu=\frac{1}{\mu(E)}\int\limits_{E}f\,d\mu.
\end{equation*}
Для шара $B\subset X$ будем обозначать $r_B$ и $x_B$ соответственно его радиус и центр.

Напомним, что $x\in X$ называется точкой Лебега для функции $f\in L^1_{\mathrm{loc}}(X)$, если
\begin{equation}\label{eqLebesguePoint}
f(x)=\lim_{r\to+0}\fint_{B(x,r)}f\,d\mu.
\end{equation}

Если условие удвоения (\ref{eqDoublingCondition}) выполнено, то для
каждой функции $f\in L^1_{\mathrm{loc}}(X)$ соотношение
(\ref{eqLebesguePoint}) выполнено $\mu$-почти всюду. Этот важный
факт (известный как теорема Лебега о дифференцировании интегралов)
можно найти в [1, теорема 1.8].

Пусть $\Phi$ --- класс непрерывных положительных строго возрастающих функций $\varphi:\mathbb{R}^{+}\to \mathbb{R}^{+}$ со свойствами $\varphi(+0)=0$,  $\lim_{t\to \infty}\varphi(t)=+\infty$. $\Phi_1$ --- класс функций $\varphi \in \Phi$ со свойством: существует такая постоянная $a_\varphi$, что
  \begin{equation*}
\varphi(t+s)\le a_\varphi(\varphi(t)+\varphi(s)),\quad t,s\in\mathbb{R}^{+}.
\end{equation*}

Для функции $\varphi \in \Phi$ и шара $B\subset X$ введем два вида средних осцилляций
\begin{equation*}%\label{eq}
A_{\varphi}(f,B) = \inf_{c} \varphi^{-1}(\fint_B \varphi(|f(x)-c|) d \mu(x)).
\end{equation*}
\begin{equation*}
\mathcal{S}_{\varphi}(f, B) = \varphi^{-1}(\fint_B \varphi(|f(x)-f_B|)\,d\mu(x)),
\end{equation*}

В случае, когда $\varphi(t)=t^{p}$, $p>0$ будем писать $A_{p}(f,B)$ и $\mathcal{S}_p(f, B)$. При $p=1$ пишем $\mathcal{S}(f,B)$ и $A(f,B)$ вместо $\mathcal{S}_1(f,B)$ и $A_1(f,B)$ соответственно.

Пусть $B_0\subset X$ --- фиксированный шар. В работе [2] в случае $X=\mathbb{R}^n$  было введено пространство функций
\begin{equation*}%\label{eq}
BMO(B_0)=\{f\in L^1_{\mathrm{loc}}(B_0):\|f\|^{*} \equiv \sup_{B\subset B_0} \mathcal{S}(f,B) <+\infty\}
\end{equation*}
и было доказано следующее утверждение: \textit{существуют постоянные $A$ и $a$, зависящие только от размерности пространства $n$, что для любого шара $B_0 \subset \mathbb{R}^n$ и $f \in BMO(B_0)$}
\begin{equation}\label{eqJohnNirenbergInequality}
\mu\{x \in B_0:\ |f(x)-f_{B_0}|>\lambda\} \leq A \mu(B_0) \exp(-\frac{a\lambda}{\|f\|^{*}}), \quad \lambda>0.
\end{equation}

Введем далее классы
\begin{equation*}%\label{eq}
BMO_{\varphi}(B_0)=\{f\in L^1_{\mathrm{loc}}(B_0):{\|f\|^{*}_{\varphi}} \equiv \sup_{B\subset B_0} \mathcal{S}_{\varphi}(f,B) <+\infty\}.
\end{equation*}
В случае $\varphi(t)=t^p$, $p>0$ будем писать просто $BMO_p(B_0)$. В силу неравенства Гельдера справедливы вложения $BMO_q(B_0)\subset BMO_p(B_0)$ при $0\leq p<q<\infty$. Кроме того, из неравенства (\ref{eqJohnNirenbergInequality}) вытекает, что на самом деле $BMO_p(B_0)=BMO(B_0)$ при $p\geq1$ и полунорма ${\|f\|^{*}_p}$
эквивалентна полунорме $\|f\|^{*}$.

Возникает естественный вопрос, справедливы ли равенства $BMO_{\varphi}(B_0)=BMO(B_0)$. Ниже будет показано, что это действительно так.

В определение пространства $BMO_{\varphi}(B_0)$ заранее требуется суммируемость функций $f$ из этого пространства. Это требование выглядит искусственным, поэтому мы рассмотрим более широкий класс
\begin{equation*}%\label{eq}
\widehat{BMO}_{\varphi}(B_0)=\{f:{\|f\|^{*}_{\varphi}} \equiv \sup_{B\subset B_0} A_{\varphi}(f,B) <+\infty\}
\end{equation*}
и для функций этого класса докажем равенство $\widehat{BMO}_{\varphi}(B_0)=BMO(B_0)$. Для этого нам понадобится аналог неравенства (\ref{eqJohnNirenbergInequality}) для средних $A_{\varphi}(f,B)$. В качестве следствий из результатов этой работы мы приведем обобщения теорем Спанне [3] и Кампанато--Мейерса [4,5].

Результаты, подобные нашим, были получены в работе [6], правда с несколько иными условиями на функцию $\varphi$.
Кроме того, отметим недавнюю работу [7], в которой также рассматривается задача нахождения возможно более слабых условий, при которых функция принадлежит классу $BMO$. Методы этой работы не связаны с неравенством Джона--Ниренберга.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\textbf{2. Вспомогательные утверждения.}

\textbf{Лемма 1.} \label{lmExistanceOfConstant}
\textit{
Пусть $\varphi\in \Phi$ и $f$ --- измеримая функция, для которой $\varphi \circ f \in L(X)$. Тогда для любого шара $B\subset X$ существует такое число $I_B^{\varphi} \in \mathbb{R}$, что}
\begin{equation*}
A_{\varphi}(f,B) = \varphi^{-1}(\fint_B \varphi(|f(x)-I_B^{\varphi}|) d \mu(x)).
\end{equation*}


\textbf{Доказательство}. Если $\varphi$ --- непрерывна, то функция
\begin{equation*}
g(c)=(\fint_B \varphi(|f(x)-c|) \,d\mu(x)),\quad c\in \mathbb{R}.
\end{equation*}
непрерывна на $\mathbb{R}$ и $\lim_{c \to \infty}g(c)=+\infty$. Поэтому вне некоторого отрезка $[-c_0, c_0]$ ее значения больше, чем $2\inf_c g(c)$. По теореме Вейерштрасса на этом отрезке функция $g$ принимает свое минимальное значение.

Стоит заметить, что постоянная $I_B^{\varphi}$ также зависит и от $f$.

В дальнейшем нам понадобится следующее известное утверждение (см., например, [8, лемма 2.7]), дающее разложение Кальдерона--Зигмунда для пространств однородного типа.

\textbf{Лемма 2.}\label{lmCalderonZygmundDecomposition}
\textit{Пусть заданы неотрицательная функция $f \in L^1(X)$ и $\alpha > f_X$ $(f_X=0$, если $\mu(X)=\infty$). Тогда существует не более чем счетный набор непересекающихся шаров $\{B_j=B(r_j,x_j)\}$, $j \geq 1$, со свойствами}

\textit{ 1) если $\mathcal{B}_j=C B_j$, то}
\begin{equation*}
\frac{1}{c} \fint_{B_j} f\,d\mu\leq \fint_{\mathcal{B}_j} f\,d\mu \leq \alpha < \fint_{B_j} f\,d\mu, \quad j\geq 1;
\end{equation*}

\textit{2) $f_B \leq \alpha$ для всех шаров $B$ с центрами в точках $x \in X \setminus\bigcup_j \mathcal{B}_j$ и, в частности, $f(x)\leq \alpha$ для почти всех $x \in X \setminus \bigcup_j \mathcal{B}_j$.}

\textit{Здесь $C\geq 1$ --- некоторая постоянная, зависящая только от $a_d$ из неравенства (\ref{eqQuasiTtiangleInequality}) (можно взять $C=6a_d^4$) и $c=a_{\mu}C^{\gamma}$.}

По сравнению с оригинальной леммой 2.7 из [8] в нашей формулировке добавлено левое неравенство в утверждении 1) и неравенство $f(x)\leq \alpha$ в утверждении 2). Левое неравенство в утверждении 1) очевидным образом вытекает из условия удвоения \eqref{eqDegreeDoublingCondition}

\begin{equation*}
 \fint_{B_j} f\,d\mu\leq \frac{\mu(\mathcal{B}_j)}{\mu(B_j)} \fint_{\mathcal{B}_j} f\,d\mu \leq c \fint_{\mathcal{B}_j} f\,d\mu,
\end{equation*}
а неравенство $f(x)\leq \alpha$ вытекает из теоремы Лебега о дифференцировании интегралов.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\textbf{3. Обобщение неравенства Джона--Ниренберга.} Основной результат статьи содержит следующая теорема, являющаяся обобщением теоремы Джона--Ниренберга (\ref{eqJohnNirenbergInequality}).

\textbf{Теорема 1.}\label{thJohnNirenberg}
\textit{Пусть заданы функция $\varphi\in\Phi_1$, шар $B_0 \subset X$, $f \in \widehat{BMO}_\varphi(B_0)$, $\Lambda>1$. Тогда справедливы неравенства}
\begin{equation*}
\mu\{x \in B_0:\ |f(x)-I_{B_0}^{\varphi}|>\lambda\} \leq A \mu(B_0) \exp(-a\lambda), \quad \lambda>0.
\end{equation*}
\textit{Здесь}
\begin{equation*}%\label{eq}
a = \frac{\ln \Lambda}{ \varphi^{-1}(a_\varphi(1+c \Lambda)  \varphi(\|f\|^{*}_\varphi))},\quad A=c \Lambda,
\end{equation*}
\textit{где $c$ ---  постоянная из леммы \ref{lmCalderonZygmundDecomposition}}.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\textbf{Доказательство.} Мы действуем по схеме работы [2] с изменениями, соответствующими нашему случаю.

Применим лемму 2 к функции $\varphi(|f(x)-I_{B_0}^{\varphi}|)$ и $\alpha = \Lambda \varphi(\|f\|^{*}_\varphi)$, находя набор таких непересекающихся шаров $\{B_j^{(1)}\}$, $j\geq 1$, что
\begin{equation}\label{eqFormula1}
\Lambda \varphi(\|f\|^{*}_\varphi)< \fint_{B_j^{(1)}} \varphi(|f(x)-I_{B_0}^{\varphi}|)\,d\mu(x) \leq
c  \Lambda \varphi(\|f\|^{*}_\varphi), \quad j\geq 1
\end{equation}
и
\begin{equation*}
\varphi(|f(x)-I_{B_0}^{\varphi}|) \leq \Lambda \varphi(\|f\|^{*}_\varphi)
\quad \text{для почти всех} \quad
x \in B_0\setminus \left(\bigcup_{j\geq 1} \mathcal{B}_j^{(1)}\right).
\end{equation*}

Из левого  неравенства в \eqref{eqFormula1} получаем
\begin{equation*}
\sum_{j\geq1} \mu(B_j^{(1)}) < \frac{1}{ \Lambda \varphi(\|f\|^{*}_\varphi)}\sum_{j\geq1} \int_{B_j^{(1)}} \varphi(|f(x)-I_{B_0}^{\varphi}|)\,d\mu(x) \leq
\end{equation*}
\begin{equation*}
\leq\frac{1}{\Lambda \varphi(\|f\|^{*}_\varphi)} \int_{B_0} \varphi(|f(x)-I_{B_0}^{\varphi}|)\,d\mu(x) \leq  \frac{\mu(B_0)}{\Lambda},
\end{equation*}
а из правого
\begin{equation*}%\label{eq}
\varphi(|I_{B_j^{(1)}}^{\varphi}-I_{B_0}^{\varphi}|)\leq a_\varphi \left(\fint_{B_j^{(1)}} \varphi (|f(x)-I_{B_j^{(1)}}^{\varphi}|)\,d\mu(x) + \fint_{B_j^{(1)}} \varphi(|f(x)-I_{B_0}^{\varphi}|)\,d\mu(x)\right) \leq
\end{equation*}
\begin{equation*}%\label{eq}
\leq  a_\varphi \left(\varphi({\|f\|^{*}_\varphi}) +  c  \Lambda \varphi(\|f\|^{*}_\varphi)\right)= a_\varphi \varphi(\|f\|^{*}_\varphi)(1+c \Lambda) .
\end{equation*}

На каждом шаре $B_j^{(1)}$ снова применим лемму \ref{lmCalderonZygmundDecomposition}, получая шары $B_{s,j}^{(2)}$, $s\geq 1$. Перенумеруем их в простую последовательность, получая набор шаров $B_j^{(2)}$, $j\geq 1$, и продолжим процесс по индукции. На $k$-ом шаге на каждом из шаров $B_j^{(k-1)}$, $j\geq1$ к функции $\varphi(|f(x)-I_{B_j^{(k-1)}}^{\varphi}|)$ применим лемму \ref{lmCalderonZygmundDecomposition} с постоянной $\alpha = \Lambda \varphi(\|f\|^{*}_\varphi)$ и получим набор шаров $\{B_{s,j}^{(k)}\}$, ${s\geq 1}$, внутренности которых попарно не пересекаются, что
\begin{equation}\label{eqFormula2}
\Lambda \varphi(\|f\|^{*}_\varphi) < \fint_{B_{s,j}^{(k)}} \varphi(|f(x)-I_{B_j^{(k-1)}}^{\varphi}|)\,d\mu(x) \leq  c \Lambda \varphi(\|f\|^{*}_\varphi), \quad s\geq 1
\end{equation}
и
\begin{equation}\label{eqFormula3}
\varphi(|f(x)-I_{B_j^{(k-1)}}^{\varphi}|) \leq \Lambda \varphi(\|f\|^{*}_\varphi) \quad \text{для почти всех} \quad x \in B_j^{(k-1)}\setminus \left(\bigcup_{s\geq 1} \mathcal{B}_{s,j}^{(k)}\right).
\end{equation}
Из левой части неравенства \eqref{eqFormula2} имеем
\begin{equation*}
\sum_{s\geq1} \mu(B_{s,j}^{(k)}) = \frac{1}{\Lambda \varphi(\|f\|^{*}_\varphi)} \sum_{s\geq1} \int_{B_{s,j}^{(k)}}\varphi( |f(x)-I_{B_j^{(k-1)}}^{\varphi}|)\,d\mu(x) \leq
\end{equation*}
\begin{equation}\label{formula4}
\leq \frac{1}{\Lambda \varphi(\|f\|^{*}_\varphi}) \int_{B_j^{(k-1)}} \varphi(|f(x)-I_{B_j^{(k-1)}}^{\varphi}|)\,d\mu(x) \leq  \frac{\mu(B_j^{(k-1)})}{\Lambda}
\end{equation}
а из правой
\begin{equation*}
\varphi(|I_{B_{s,j}^{(k)}}^{\varphi}-I_{B_j^{(k-1)}}^{\varphi}|) \leq
\end{equation*}
\begin{equation*}
\leq a_\varphi \left(\frac{1}{\mu(B_{s,j}^{(k)})}\int_{B_{s,j}^{(k)}} \varphi(|f(x)-I_{B_{s,j}^{(k)}}^{\varphi}|)\,d\mu(x) + \frac{1}{\mu(B_{s,j}^{(k)})}\int_{B_{s,j}^{(k)}} \varphi(|f(x)-I_{B_j^{(k-1)}}^{\varphi}|)\,d\mu(x)\right)
\end{equation*}
\begin{equation}\label{eqFormula5}
 \leq  a_\varphi \left(\varphi({\|f\|^{*}_\varphi}) +  c  \Lambda \varphi(\|f\|^{*}_\varphi)\right)=a_\varphi \varphi(\|f\|^{*}_\varphi)(1+c \Lambda).
\end{equation}

Перенумеровав все шары $B_{s,j}^{(k)}$, $s,j\geq1$, в простую последовательность, получаем набор $\{B_{j}^{(k)}\}$, $j\geq 1$. При этом, из \eqref{formula4} вытекает, что
\begin{equation*}
\sum_{j\geq1} \mu(B_{j}^{(k)}) \leq \frac{1}{\Lambda}\sum_{j\geq1} \mu(B_{j}^{(k-1)}) \leq (\frac{1}{\Lambda})^2\sum_{j\geq1} \mu(B_{j}^{(k-2)}) \leq \cdots
\end{equation*}
\begin{equation}\label{eqFormula6}
\leq \left(\frac{1}{\Lambda}\right)^{k-1}\sum_{j\geq1} \mu(B_{j}^{(1)}) \leq \left(\frac{1}{\Lambda}\right)^{k} \mu(B_0),
\end{equation}
а из \eqref{eqFormula3} и \eqref{eqFormula5} следует, что для почти всех $x \in \left(\bigcup_{j\geq 1} B_j^{(k-1)}\right)\setminus \left(\bigcup_{j\geq 1} \mathcal{B}_{j}^{(k)}\right)$
\begin{equation*}
|f(x)-I_{B_0}^{\varphi}| \leq |f(x)-I_{B_{j_{k-1}}^{(k-1)}}^{\varphi}| + |I_{B_{j_{k-1}}^{(k-1)}}^{\varphi} - I_{B_{j_{k-2}}^{(k-2)}}^{\varphi}| + \ldots + |I_{B_{j_{1}}^{(1)}}^{\varphi} - I_{B_0}^{\varphi}| \leq
\end{equation*}
\begin{equation}\label{eqFormula7}
\leq \varphi^{-1}(\Lambda\|f\|^{*}_\varphi) + (k-1)\varphi^{-1} \left( a_\varphi (1+c \Lambda) \varphi(\|f\|^{*}_\varphi)\right)=k \varphi^{-1}\left( a_\varphi (1+c \Lambda) \varphi(\|f\|^{*}_\varphi)\right),
\end{equation}
где индексы $j_1,\ldots, j_{k-1}$ выбраны таким образом, чтобы
\begin{equation*}%\label{eq}
x \in B_{j_{k-1}}^{(k-1)}\subset B_{j_{k-2}}^{(k-2)} \subset\ldots \subset B_{j_{1}}^{(1)} \subset B_0.
\end{equation*}
После этого переходим к $(k+1)$-му шагу.

Возьмем теперь произвольное $\lambda>0$. Если
\begin{equation*}
k \varphi^{-1} \left( a_\varphi (1+c\Lambda) \varphi(\|f\|^{*}_\varphi)\right) \leq \lambda < (k+1) \varphi^{-1} \left( a_\varphi (1+c\Lambda) \varphi(\|f\|^{*}_\varphi)\right)
\end{equation*}
при некотором $k \in \mathbb N$, то используя условие удвоения (\ref{eqDoublingCondition}) и формулы (\ref{eqFormula6}) и (\ref{eqFormula7}) получаем
\begin{equation*}
\mu{\{x\in B_0:\ |f(x)-I_{B_0}^{\varphi}|>\lambda\}}=
 \mu\{{x\in B_0:|f(x)-I_{B_0}^{\varphi}|>k \varphi^{-1} \left( a_\varphi(1+c\Lambda) \varphi(\|f\|^{*}_\varphi)\right)}\}
\end{equation*}
\begin{equation*}
\leq \sum_{j\geq1} \mu(\mathcal{B}_{j}^{(k)}) \leq  c \sum_{j\geq 1} \mu(B_{j}^{(k)}) \leq  c \left(\frac{1}{\Lambda}\right)^{k} \mu(B_0) = c \mu(B_0)\exp\left(-k \ln \Lambda\right) \leq
\end{equation*}
\begin{equation*}
\leq  c \mu(B_0)\exp\left(\left(-\frac{\lambda}{ \varphi^{-1} \left(a_\varphi (1+c\Lambda) \varphi(\|f\|^{*}_\varphi) \right)}\right)\ln \Lambda\right)
\end{equation*}
\begin{equation*}
=  c \Lambda\mu(B_0)\exp \left(-\frac{\lambda\ln \Lambda}{ \varphi^{-1} \left(a_\varphi(1+c \Lambda) \varphi(\|f\|^{*}_\varphi) \right)}\right) = c \Lambda\mu(B_0)\exp(-a \Lambda),
\end{equation*}
где $a = \frac{\ln \Lambda}{ \varphi^{-1} \left(a_\varphi (1+c \Lambda)  \varphi(\|f\|^{*}_\varphi)\right)}$.

Если $\lambda < \varphi^{-1} \left( a_\varphi (1+c\Lambda) \varphi(\|f\|^{*}_\varphi)\right)$, то
\begin{equation*}
\mu\{x\in B_0:\ |f(x)-I_{B_0}|>\lambda\} \leq
\end{equation*}
\begin{equation*}
\leq c \mu(B_0)\exp\left(-a \Lambda \right) \exp \left( a \varphi^{-1}\left( a_\varphi (1+c\Lambda) \varphi(\|f\|^{*}_\varphi)\right)\right)
=  c \Lambda \mu(B_0)\exp\left(-a \lambda\right).
\end{equation*}
Положив $A =  c \Lambda$ получим утверждение теоремы.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\textbf{4. Следствия.} Приведем несколько следствий, вытекающих из этой теоремы.

\textbf{Следствие 1.}\label{crEstimationOfDifferenceFunctionAndConstant}
\textit{Пусть $\varphi \in \Phi_1$ , шар $B_0 \subset X$, функция $f\in \widehat{BMO}_\varphi(B_0)$ и $g(x)=|f(x)-I_{B_0}^\varphi|$. Тогда}
\begin{equation*}
g^*(t) \leq \frac{1}{a}\ln\frac{A\mu(B_0)}{t}, \quad 0<t<\mu(B_0).
\end{equation*}


\textbf{Доказательство.}
Пусть $0<t<\mu(B_0)$. Тогда
\begin{equation*}
g^*(t) = \sup\{y>0:\ \mu\{x\in B_0:\ |f(x)-I_{B_0}^{\varphi}|>y\}>t\} \leq
\end{equation*}
\begin{equation*}
\leq \sup\left\{y>0:\ A\mu(B_0)\exp(-a y)>t\right\}
\end{equation*}
\begin{equation*}
= \sup\left\{y>0:\ y < \frac{1}{a}\ln\frac{A\mu(B_0)}{t}\right\} = \frac{1}{a}\ln\frac{A\mu(B_0)}{t}=\frac{ \varphi^{-1}\left(a_\varphi(1+c \Lambda)  \varphi(\|f\|^{*}_\varphi)\right)}{\ln \Lambda}\ln\frac{c \Lambda \mu(B_0)}{t}.
\end{equation*}

\textbf{Следствие 2.}\label{crIntersectionOfLq}
\textit{Пусть $\varphi \in \Phi_1$, шар $B_0 \subset \mathbb{R}$ и  функция $f\in \widehat{BMO}_\varphi(B_0)$. Тогда}
\begin{equation*}%\label{eq}
\widehat{BMO}_\varphi(B_0)\subset\bigcap_{q>0} L^q(B_0)
\end{equation*}


\textbf{Доказательство.}
Покажем, что $f\in L^q(B_0)$ для всех $q>0$. Пусть $g(x)=|f(x)-I_{B_0}^{\varphi}|$. Тогда, применяя следствие 1, получим
\begin{equation*}
\int_{B_0} |f(x)-I_{B_0}^{\varphi}|^q\,d\mu(x) = \int_0^{\mu(B_0)} (g^*(t))^q dt \leq \left(\frac{1}{a}\right)^{q}\int_0^{\mu(B_0)} \ln^{q}\frac{A\mu(B_0)}{t}dt < +\infty.
\end{equation*}


\textbf{Следствие 3.}\label{crBMOPhi1InBMO}
\textit{Пусть функция $\varphi \in \Phi_1$, шар $B_0 \subset \mathbb{R}$ и функция $f\in \widehat{BMO}_\varphi(B_0)$. Тогда $f \in BMO(B_0)$ и выполнена оценка}

\begin{equation*}
\sup_{B\subset B_0}\fint_B |f(x)-f_B|\,d\mu(x) \leq \frac{2 \left(1 + \ln (c \Lambda)\right)}{\ln \Lambda} \varphi^{-1}\left((1+c \Lambda)  \varphi(\|f\|^{*}_\varphi)\right)
\end{equation*}

\textbf{Доказательство.}
Пусть шар $B \subset B_0$, $h=f|_{B}$ -- сужение функции $f$ на шар $B$. Тогда $h \in \widehat{BMO}_\varphi(B)$, $\|h\|^{*}_\varphi\leq \|f\|^{*}_\varphi$. Обозначим $g(x)=|h(x)-I_{B}^{\varphi}|$. Тогда
\begin{equation*}
\fint_B |f(x)-f_B|\,d\mu(x) \leq 2\fint_B |f(x)-I_{B}^{\varphi}|\,d\mu(x) \leq 2\fint_0^{\mu(B)} g^*(t)dt
\end{equation*}
\begin{equation}\label{eqEstimateOfBmoNorm}
\leq  \frac{2}{a}\fint_0^{\mu(B)} \ln\frac{A\mu(B)}{t}dt = \frac{2A}{a}\int_0^{1/A} \ln\frac{1}{t}dt=\frac{2}{a} (\ln A +1).
\end{equation}
Таким образом,
\begin{equation*}
\sup_{B\subset B_0}\fint_B |f(x)-f_B|\,d\mu(x) \leq \frac{2}{a}(\ln A +1) = \frac{2 \left(1 + \ln (c \Lambda)\right)}{\ln \Lambda} \varphi^{-1}\left(a_\varphi(1+c \Lambda)  \varphi(\|f\|^{*}_\varphi)\right)< + \infty.
\end{equation*}

На самом деле, в следствии 3 от некоторых предположений можно избавиться, если не заботиться об оценке.

\textbf{Следствие 4.}
\textit{Пусть функция $\varphi\in \Phi$ и шар $B_0 \subset X$. Тогда если}
\begin{equation*}
\sup_{B\subset B_0}\inf_{c}\left(\fint_B \varphi(|f(x)-c|) \,d\mu(x)\right)<\infty,
\end{equation*}
\textit{то $f\in BMO(B_0)$}.


Это утверждение вытекает из следствия 3 по аналогии с работой [7].

\textbf{5. Обобщение теорем Кампанато--Мейерса и Спанне.} Обозначим
\begin{equation*}
\mu_\varphi(f,t) \equiv \sup_{\substack{B\subset B_0\\ 0<r_B\leq t}} A_{\varphi}(f,B) = \sup_{\substack{B\subset B_0\\ 0<r_B\leq t}} \inf_{c\in \mathbb{R}} \varphi^{-1}\left(\fint_B \varphi(|f(x)-c|) \,d\mu(x)\right).
\end{equation*}

Очевидно, что функция $\mu_\varphi(f,t)$ возрастает по $t$. В случае, если $\varphi(t)=t^p$, $p>0$, пишем просто $\mu_p(f,t)$. Если $p=1$, то в качестве $\mu_1(f,t)$ можно использовать функцию

\begin{equation*}
\mu_1(f,t) \equiv \sup_{\substack{B\subset B_0\\ 0<r_B\leq t}} \inf_{c\in \mathbb{R}} \left(\fint_B |f(x)-f_B| \,d\mu(x)\right).
\end{equation*}
Это вытекает из очевидных неравенств
\begin{equation*}
\fint_B |f(x)-f_B|\,d\mu(x) \leq 2\fint_B |f(x)-I_{B}^{\varphi}|\,d\mu(x),
\end{equation*}
\begin{equation*}
\fint_B |f(x)-I_{B}^{\varphi}|\,d\mu(x) \leq \fint_B |f(x)-f_B|\,d\mu(x).
\end{equation*}


\textbf{Следствие 5.}\label{crEquivalenceOfMu}
\textit{Если $\varphi \in \Phi_1$, $f \in \widehat{BMO}_{\varphi}(B_0)$, то }
\begin{equation}\label{eqEstimateOfMu1}
\mu_1(f,t) \leq
\frac{2 \left(1 + \ln (c \Lambda)\right)x}{\ln \Lambda} \varphi^{-1}\left(a_\varphi(1+c \Lambda)  \varphi(\mu_\varphi(f,t))\right).
\end{equation}.

\textbf{Доказательство.} Зафиксируем $0<t\leq r_{B_0}$ и пусть $B \subset B_0$, $r_B\leq t$.

 Пусть $h=f|_{B}$ -- сужение функции $f$ на шар $B$. Тогда $h \in \widehat{BMO}_\varphi(B)$, $\|h\|^{*}_\varphi\leq \|f\|^{*}_\varphi$. Обозначим $g(x)=|h(x)-I_{B}^{\varphi}|$.
Тогда используя \eqref{eqEstimateOfBmoNorm}
\begin{equation*}
\fint_B |f(x)-f_B|\,d\mu(x) \leq
\frac{2 \left(1 + \ln (c \Lambda)\right)}{\ln \Lambda} \varphi^{-1}\left(a_\varphi(1+c \Lambda)  \varphi(\mu_\varphi(f,t))\right).
\end{equation*}
Переходя к верхней грани по всем шарам $B \subset B_0$, $\mu(B)\leq t$, получим \eqref{eqEstimateOfMu1}.

Для формулировки следующей теоремы введем понятие модуля непрерывности функции $f\in C(X)$ как
\begin{equation*}%\label{eq}
\omega(f,\delta)=\max \limits_{d(x,y) \leq \delta} |f(x) - f(y)|, \, 0<\delta< 1.
\end{equation*}

Также приведем почти очевидную лемму.

\textbf{Лемма 3.} \textit{Пусть $0<r_1\le r_2$ и $B(x_1,r_1)\subset B(x_2,r_2)$. Тогда}
\begin{equation*}%\label{}
\frac{\mu B(x_2,r_2)}{\mu B(x_1,r_1)}\lesssim
\left(\frac{r_2}{r_1}\right)^{\gamma}.
\end{equation*}


\textbf{Доказательство.} При наших условиях $B(x_2,r_2)\subset
B(x_1,2 a_d r_2)$. Сле\-до\-ва\-тель\-но, в силу условия
(\ref{eqDegreeDoublingCondition})
\begin{equation*}%\label{}
\frac{\mu B(x_2,r_2)}{\mu B(x_1,r_1)}= \frac{\mu B(x_1,2 a_d r_2)}{\mu
B(x_1,r_1)}\cdot\frac{\mu B(x_2,r_2)}{\mu B(x_1,2 a_d r_2)}
\leq c_1 \left(\frac{r_2}{r_1}\right)^{\gamma}.
\end{equation*}

\textbf{Теорема 2.}\label{thEsimateOfModulusByMu}
\textit{Пусть $\varphi \in \Phi_1$, $f \in \widehat{BMO}_{\varphi}(B)$ для любого шара $B\subset X$ и выполнено условие}
\begin{equation}\label{eqMainConditionOnMu}
\int\limits_{0}^{1} \varphi^{-1} (a_\varphi(1+c\Lambda) \varphi(\mu_{\varphi}(f,t)))
\,\frac{d t}{t}<\infty.
\end{equation}
\textit{Тогда $f$ эквивалентна некоторой функции $g\in C(X)$ и}
\begin{equation}\label{eqEsimateOfModulusByMu}
\omega(g,\delta)\leq M \int\limits_{0}^{\delta}  \varphi^{-1} (a_\varphi(1+c\Lambda) \varphi(\mu_{\varphi}(f,t)))\,\frac{d t}{t},\quad 0<\delta< 1,
\end{equation}
\textit{где $M=(1+c_2) (1+a_{\mu} 2^{\gamma}) \frac{2 \left(1 + \ln (c \Lambda)\right)}{\ln \Lambda}$ и постоянная $c_2$ зависит только от пространства $X$.}

\textbf{Доказательство.} В силу \eqref{eqEstimateOfMu1} достаточно провести доказательство для $\mu_1(f,t)$. Рассмотрим два шара $B_1, B_2 \subset X$, таких, что $B_2 =2 B_1$. Тогда для любого $y \in B_1$ имеет место неравенство
\begin{equation*}%\label{}
|f_{B_1}-f_{B_2}| \leq |f_{B_1}-f(y)| +|f_{B_2}-f(y)|.
\end{equation*}

Интегрируя это неравенство по шару $B_1$, получим
\begin{equation}\label{eqEstimateOfTwoMeansInPDegree}
|f_{B_1}-f_{B_2}| \leq \fint\limits_{B_1} |f -  f_{B_1}|
\,d\mu +\fint\limits_{B_1} |f - f_{B_2}|
\,d\mu .
\end{equation}

Так как  $B_1 \subset B_2$, то из \eqref{eqDegreeDoublingCondition} следует

\begin{equation}\label{eqEstimateOfMeansIntegrals}
\fint\limits_{B_1} |f - f_{B_2} | \,d\mu \leq \frac{\mu(B_2)}{\mu(B_1)}\bigg(\fint\limits_{B_2} |f - f_{B_2}| \,d\mu\bigg) \leq \beta \fint\limits_{B_2} |f - f_{B_2}| \,d\mu,
\end{equation}
где $\beta=a_{\mu} 2^{\gamma}$.

Из (\ref{eqEstimateOfTwoMeansInPDegree}) и (\ref{eqEstimateOfMeansIntegrals}) очевидным образом следует, что

\begin{equation*}%\label{ineqMu4}
|f_{B_1}-f_{B_2}| \leq \fint\limits_{B_1} |f - f_{B_1}|
\,d\mu + \beta \fint\limits_{B_2} |f - f_{B_2}|
\,d\mu
\end{equation*}

Таким образом, в силу возрастания функции $\mu_{1}(f,t)$ и предыдущего неравенства

\begin{equation}\label{eqEstimateOfTwoMeans}
|f_{B_1}-f_{B_2}| \leq \mu_{1} (f,r_{B_1}) +  \beta\mu_{1}(f,r_{B_2}) \leq (1+\beta)\mu_{1}(f,r_{B_2}).
\end{equation}

Рассмотрим любую точку Лебега $x\in X$ и $r>0$. Из теоремы Лебега о дифференцировании следует, что $f_{B_k}$ сходятся к $f(x)$ при $k\to\infty$ почти всюду. Это означает, что
\begin{equation*}
f(x)=\lim_{k\to\infty}f_{B_k}=f_{B(x,r)}+\sum_{k=0}^\infty[f_{B_{k+1}}-f_{B_k}],
\end{equation*}
где $B_k=B(x, 2^{-k}r)$. Тогда из (\ref{eqEstimateOfTwoMeans}) и (\ref{eqMainConditionOnMu}) вытекает
\begin{equation*}
|f(x) - f_{B(x,r)}|= \left|\sum_{k=0}^\infty[f_{B_{k+1}}-f_{B_k}]\right| \leq
\end{equation*}
\begin{equation*}
\leq (1+\beta) \sum_{k=0}^\infty \mu_{1}(f,r_{B_k}) \leq (1+\beta)  \sum_{k=0}^\infty \int\limits_{r_{B_{k+1}}}^{r_{B_k}}  \mu_{1}(f,t) \,\frac{d t}{t}  \leq (1+\beta)  \int\limits_{0}^{r}  \mu_{1}(f,t)\,\frac{d t}{t}<\infty.
\end{equation*}

Из этого следует, что для любых двух точек Лебега $x,y \in X$  и $r=d(x,y)$
\begin{equation*}
|f(x) - f(y)|\leq |f_{B(x, r)}-f(x)| + |f_{B(x, r)}-f_{B(y, 2 r)}| +|f_{B(y, 2 r)}-f(y)|.
\end{equation*}
Оценим отдельно $|f_{B(x, r)}-f_{B(y, 2 r)}|$.
\begin{equation*}
|f_{B(x, r)}-f_{B(y, 2 r)}| \leq |f(z) - f_{B(x, r)}| + |f(z)-f_{B(y, 2 r)}|.
\end{equation*}
 Усредняя это неравенство по $z\in B(x,r)$ и используя Лемму 3 получаем
\begin{equation*}
|f_{B(x, r)}-f_{B(y, 2 r)}|\leq  \fint\limits_{B(x, r)} |f(z) - f_{B(x, r)}|\,d\mu(z) + \fint\limits_{B(x, r)} |f(z) - f_{B(y, 2 r)}|\,d\mu(z) \leq
\end{equation*}

\begin{equation*}
\leq  \left(\fint\limits_{B(x, r)} |f(z) - f_{B(x, r)}|\,d\mu(z) + c_1 \fint\limits_{B(y, 2 r)} |f(z) - f_{B(y, 2 r)}|\,d\mu(z) \right) \leq c_2 \mu_{1}(f,2 r).
\end{equation*}
Таким образом, 
\begin{equation*}
|f(x) - f(y)|\leq (1+\beta)\left(\int \limits_{0}^{r} \mu_{1}(f,t)\,\frac{d t}{t} + c_2\mu_{1}(f,2 r) +\int\limits_{0}^{2 r} \mu_{1}(f,t)\,\frac{d t}{t}\right)\leq
\end{equation*}

\begin{equation*}
\leq (1+\beta)\left(\int\limits_{0}^{r} \mu_{1}(f,t)\,\frac{d t}{t} + c_2 \int\limits_{r}^{2 r} \mu_{1}(f,t)\,\frac{d t}{t} +\int\limits_{0}^{2 r} \mu_{1}(f,t)\,\frac{d t}{t}\right) \leq
\end{equation*}
\begin{equation*}
 \leq (1+c_2) (1+\beta) \int\limits_{0}^{2 r} \mu_{1}(f,t)\,\frac{d t}{t} \leq M \int\limits_{0}^{2 r}  \varphi^{-1} (a_\varphi(1+c\Lambda) \varphi(\mu_{\varphi}(f,t)))\,\frac{d t}{t} < \infty.
\end{equation*}

Так как множество точек Лебега для $f$ плотно в $X$, то $f$ можно единственным образом продолжить с множества точек Лебега на все пространство $X$ до функции $g$, удовлетворяющей неравенству
\begin{equation*}
|g(x_1)-g(x_2)| < \infty,\quad x_1,x_2\in X.
\end{equation*}
И теорема доказана.

Сравним теорему \ref{thEsimateOfModulusByMu} с предшествующими результатами. В частном случае $t^p$, $p=1$, $X=Q$ --- куб в $\mathbb{R}^n$ ее утверждение было получено другим, значительно более сложным способом в работе С.~Спанне [3]. Теорема 2 дает усиление этого результата даже для функций $t^p$, $0<p\leq 1$,  так как условие (\ref{eqEsimateOfModulusByMu}) тем сильнее, чем меньше $p$.



В качестве следствия из теоремы 2 мы получим основной результат работы [9], дающий описание классов Гельдера в терминах поведения средних Стеклова.

Для $\alpha>0$  определим $\Omega(\alpha)$ как класс положительных возрастающих функций $\eta:\mathbb{R}_+\to\mathbb{R}_+$, для которых при некотором $0<\delta<\alpha$ функция $\eta(t)t^{-\delta}$ возрастает, а функция $\eta(t)t^{-\alpha}$ убывает. Пусть еще
\begin{equation*}%\label{eq}
\Omega(\infty)=\bigcup_{\alpha>0}\Omega(\alpha).
\end{equation*}

Пусть $\eta\in\Omega(\infty)$. Будем говорить, что функция $f:X\to\mathbb{R}$ принадлежит обобщенному классу Гельдера $H^{\eta}(X)$, если для некоторого $r_0>0$
\begin{equation*}%\label{eq}
\sup\left\{\frac{|f(x)-f(y)|}{\eta(d(x,y))}:x,y\in X,\,0<d(x,y)<r_0\right\}<+\infty.
\end{equation*}
%В случае $\eta(t)=t^{\alpha}$, $\alpha>0$, будем писать $H^{\alpha}$ вместо $H^{\eta}$.

%Обычно классы $H^{\eta}$ рассматриваются при условии $\eta\in\Omega(1)$. Это связано с тем, что если, например, $X=[0,1]^n$ и $\eta\in\Omega(\alpha)$ при некотором $\alpha>1$ (или, более общо, $\eta(t)=o(t)$ при $t\to+0$), то класс $H^{\eta}(X)$ состоит только из тождественных постоянных. В случае же общих метрических пространств $X$ возможны ситуации, когда классы $H^{\alpha}(X)$ нетривиальны при некоторых $\alpha>1$. Например, на кривой Коха это так при $0<\alpha\leq\frac{\ln 4}{\ln 3}$ \cite{Jonsson}. Этим объясняется то, что мы рассматриваем классы $H^{\eta}(X)$ с $\eta\in\Omega(\infty)$.


В [9] доказано, что если $f\in L^1_{\mathrm{loc}}(X)$, $\eta\in\Omega(\infty)$, $p> 0$, и для некоторого $R_0>0$ выполнено условие
\begin{equation}\label{eqCampanatoCondition}
\sup_{B:r_B<R_0}\frac{1}{\eta(r_B)}\left(\fint_{B}|f-f_B|^p\,d\mu\right)^{1/p}<+\infty,
  \end{equation}
то $f$ эквивалентна некоторой функции класса $H^{\eta}(X)$. В частном случае $p=1$, $\eta(t)=t^{\alpha}$ и $X\subset\mathbb{R}^n$ этот результат --- классическая теорема К.Кампанато--Н.Мейерса [4], [5] (см. также более поздний результат из [10]).

Этот результат является простым следствием из теоремы 2, причем без дополнительного условия $f\in L^1_{\mathrm{loc}}(X)$. Действительно, в силу условия (\ref{eqCampanatoCondition}) $\mu_p(f,t) \lesssim \eta(t)$. Интегрируя это неравенство по $t$ и используя (\ref{eqEsimateOfModulusByMu}), получим
\begin{equation*}
\omega(f,\delta)\lesssim \int\limits_{0}^{\delta} \mu_p(f,t)\,\frac{d t}{t} \lesssim \int\limits_{0}^{\delta} \eta(t)\,\frac{d t}{t},\quad 0<\delta< 1.
\end{equation*}
Так как $\eta\in\Omega(\infty)$, то правая часть последнего неравенства оценивается сверху через $\eta(\delta)$
и $\omega(f,\delta)\lesssim \eta(\delta),\quad 0<\delta< 1$.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage

\begin{center}
\textbf{Литература}
\end{center}

{\small
\lit{1}{Heinonen J.}{Lectures on analysis on metric spaces. New York--Berlin--Heidelberg: Springer-Verlag, 2001.}
\lit{2}{John F., Nirenberg L.}{On functions of bounded mean oscillation //Comm. Pure Appl. Math. 1961. V. 14., \No 2 P. 415-426.}

\lit{3}{Spanne S.}{Some function spaces defined using the mean oscillation over cubes // Ann. Scuola norm. super. Pisa. 1965. V.~19, \No~4. P.~593--608.}
\lit{4}{Campanato C.}{Proprieta di holderianita di alcune classi di funzioni. // ~Ann. Sc. Norm. Super. Pisa Cl. Sci. 1963. V. 17, \No 1-2. P. 175--188}
\lit{5}{Meyers N. J.}{Mean oscillation over cubes and H\"older continuity. // ~Proc. Amer. Math. Soc. 1964. V. 15, \No 5. P.717-–721.}

\lit{6}{R. Long, L. Yang.}{BMO functions in spaces of homogeneous type. // Sci. Sinica Ser. 1984. V 27. \No 7. P. 695–708.}
\lit{7}{A. A. Logunov, L. Slavin, D. M. Stolyarov, V. Vasyunin, P. B. Zatitskiy.}{Weak integral conditions for BMO. // 2013. arXiv:1309.6780v1.}
\lit{8}{Aimar H.}{Singular integrals and approximate identities on spaces of homogeneous type // TAMS. 1985. Vol. 292. P. 135-153.}

\lit{9}{Иванишко~И.А., Кротов~ В.Г., Порабкович А.И.}{Обобщение теоремы Кампанато-–Мейерса // Труды Института математики НАН Беларуси. 2012. Т. 20, \No 2. C. 30--35.}
\lit{10}{Gorka P.}{Campanato theorem on metric measure spaces. // Ann. Acad. Sci. Fenn. 2009. V. 34. P. 523--528.}







}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\bigskip\bigskip

\centerline{\textbf{A.~I.~Porabkovich, R.~V.~Shanin}}
\centerline{\textbf{A generalization of John--Nirenberg' inequailty}}
\bigskip

\centerline{\textbf{Summary}}

{\small
We prove a generalization of classic John--Nirenberg's theorem giving the characterization of $BMO$ classes. This generalization is valid for arbitrary metric space with doubling measure.
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\newpage
\end{document}
